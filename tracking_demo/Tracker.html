{% extends "global/Page.html" %}
{% load otree static %}

{% block title %}
    Track Element Hovers
{% endblock %}

{% block styles %}
    <style type="text/css">
    
    
    
        .flip-card {
            perspective: 1000px;
        }

        
    .flip-card {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-evenly;

        width: 300px;
        height: 100px;
        min-width: 300px;
        margin: 10px;
    }

    
        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 1.1s;
            transform-style: preserve-3d;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);

            border-color:  #c9c389;
            border-width: 2px;
            border-style: solid;
            border-radius: 2%;
            background-color:goldenrod;
        }
    
        .flip-card:hover .flip-card-inner {
            transform: rotateX(180deg);
            
        }

        .flip-card-front span {
            padding: 50px;
        }
    
        .flip-card-front,
        .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            padding: 25pt 0;
        }
    
        .flip-card-back {
            transform: rotateX(-180deg);
        }
   


    .flip-card-back {
        color: black;
        background-color: gold;
        /* font-size: 21px; */
        /* border-radius: 0%; */
    }

    #page_0_10_flipcards {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-evenly;

        flex-direction: column;
    }



    </style>






{% endblock %}

{% block content %}


<div class = "row">



<div class="col-6" id="page_0_10_flipcards">
    <h3> Option A </h3>
    <img style="width:50%; max-width:200px;" src="{{ static 'global/images/bowl.webp'}}">  
    <div class="flip-card tracked_element" id="att_A1">
        <!-- <div class=" "> -->
        <div class=" flip-card-inner" id="att_A1_inner">
            <div  id="att_A1_frontwrapper" class=" flip-card-front valign-wrapper jok">
                <span id="att_A1_frontspan">Price</span>
            </div>

            <div  id="att_A1_backwrapper" class=" flip-card-back valign-wrapper jok">
                <span id="att_A1_backspan"> xx$ </span>
            </div>
        </div>
        <!-- </div> -->
    </div>

    <div class="flip-card tracked_element" id="att_A2">
        <!-- <div class=" "> -->
        <div id="att_A2_inner" class=" flip-card-inner">
            <div  id="att_A2_frontwrapper" class=" flip-card-front valign-wrapper jok">
                <span id="att_A2_frontspan"> CO2 equivalents</span>
            </div>

            <div id="att_A2_backwrapper" class=" flip-card-back valign-wrapper jok">
                <span id="att_A2_backspan"> 50g CO2</span>
            </div>
        </div>
        <!-- </div> -->
    </div>


    <div class="flip-card tracked_element" id="att_A3">
        <!-- <div class=" "> -->
        <div id="att_A3_inner" class="flip-card-inner ">
            <div id="att_A3_frontwrapper" class=" flip-card-front valign-wrapper jok">
                <span id="att_A3_frontspan"> Protein</span>
            </div>

            <div id="att_A3_backwrapper" class=" flip-card-back valign-wrapper jok">
                <span id="att_A3_backspan"> 0</span>
            </div>
        </div>
        <!-- </div> -->
    </div>

</div>



<div class="col-6" id="page_0_10_flipcards">
    <h3> Option B </h3>

    <img style="width:50%; max-width:200px;" src="{{ static 'global/images/salad.webp'}}">  
    <div class="flip-card tracked_element" id="att_B1">
        <!-- <div class=" "> -->
        <div class=" flip-card-inner" id="att_B1_inner">
            <div  id="att_B1_frontwrapper" class=" flip-card-front valign-wrapper jok">
                <span id="att_B1_frontspan">Price</span>
            </div>

            <div  id="att_B1_backwrapper" class=" flip-card-back valign-wrapper jok">
                <span id="att_B1_backspan"> xx$ </span>
            </div>
        </div>
        <!-- </div> -->
    </div>

    <div class="flip-card tracked_element" id="att_B2">
        <!-- <div class=" "> -->
        <div id="att_B2_inner" class=" flip-card-inner">
            <div  id="att_B2_frontwrapper" class=" flip-card-front valign-wrapper jok">
                <span id="att_B2_frontspan"> CO2 equivalents</span>
            </div>

            <div id="att_B2_backwrapper" class=" flip-card-back valign-wrapper jok">
                <span id="att_B2_backspan"> 50g CO2</span>
            </div>
        </div>
        <!-- </div> -->
    </div>


    <div class="flip-card tracked_element" id="att_B3">
        <!-- <div class=" "> -->
        <div id="att_B3_inner" class="flip-card-inner ">
            <div id="att_B3_frontwrapper" class=" flip-card-front valign-wrapper jok">
                <span id="att_B3_frontspan"> Protein</span>
            </div>

            <div id="att_B3_backwrapper" class=" flip-card-back valign-wrapper jok">
                <span id="att_B3_backspan"> 0</span>
            </div>
        </div>
        <!-- </div> -->
    </div>
</div>

</div>

    


    {% next_button %}

{% endblock %}

{% block scripts %}
    <script type="text/javascript">
        let hover_events = {};

        $(".tracked_element").mouseenter(function(e) {
            // entering starts a new hover event
            let enter_time = Date.now();
            myid = e.target.id.substring(0, 6)
            hover_events[myid] = {
                element_id: myid,
                enter_time: enter_time,
                leave_time: undefined
            };
            console.log("hallo printe mal")
            console.log(hover_events[myid])

           // visualization only
           //$("#"+e.target.id+"_state").text("mouse entered");
           //$("#"+e.target.id+"_enter").text(enter_time);
           //$("#"+e.target.id+"_leave").text("");
        });

        $(".tracked_element").mouseleave(function (e) {
            // this concludes a hover event
            let leave_time = Date.now();
            myid = e.target.id.substring(0, 6)
            hover_events[myid]["leave_time"] = leave_time;
            hover_events[myid]["duration"] = leave_time - hover_events[myid]["enter_time"];
            hover_events[myid]["attributeType"] = $('#'+ myid + '_frontspan').text();
            hover_events[myid]["attributeValue"] = $('#'+ myid + '_backspan').text();
            

            // send the event and free up the element in the dictionary.
            liveSend(hover_events[myid]);
            console.log("hallo printe gehen")
            console.log(hover_events[myid])

            delete(hover_events[myid]);

            // visualization only
            //$("#"+e.target.id+"_state").text('mouse left');
            //$("#"+e.target.id+"_leave").text(leave_time);
        });

    </script>
{% endblock %}